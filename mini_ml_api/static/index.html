<!DOCTYPE html>
<form id="etaForm">
    <input type="number" step="0.1" placeholder="Distance (km)" name="distance" />
    <input type="number" step="0.1" placeholder="Speed (km/h)" name="speed" />
    <input type="number" step="0.01" placeholder="Traffic Level (0-1)" name="traffic_level" />
    <input type="number" placeholder="Weather Code" name="weather" />
    <input type="number" placeholder="Road Type Code" name="road_type" />
    <input type="number" placeholder="Day (0=weekday, 1=weekend)" name="day_of_week" />
    <button type="submit">Predict ETA</button>
</form>

<div id="result"></div>

<script>
    document.getElementById("etaForm").addEventListener("submit", async function (e) {
        e.preventDefault();
        const formData = new FormData(e.target);
        const payload = Object.fromEntries(formData);
        for (let key in payload) payload[key] = parseFloat(payload[key]);

        const response = await fetch("/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload)
        });
        const data = await response.json();
        document.getElementById("result").innerText = `Predicted ETA: ${data.predicted_time.toFixed(2)} hours`;
    });
</script>
<h3>Input Code Reference</h3>
<table border="1" cellpadding="6" cellspacing="0">
  <thead>
    <tr>
      <th>Feature</th>
      <th>Code</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Weather</td>
      <td>0</td>
      <td>Clear</td>
    </tr>
    <tr>
      <td>Weather</td>
      <td>1</td>
      <td>Rainy</td>
    </tr>
    <tr>
      <td>Weather</td>
      <td>2</td>
      <td>Foggy</td>
    </tr>
    <tr>
      <td>Weather</td>
      <td>3</td>
      <td>Snowy</td>
    </tr>
    <tr>
      <td>Road Type</td>
      <td>0</td>
      <td>Highway</td>
    </tr>
    <tr>
      <td>Road Type</td>
      <td>1</td>
      <td>Urban</td>
    </tr>
    <tr>
      <td>Road Type</td>
      <td>2</td>
      <td>Residential</td>
    </tr>
    <tr>
      <td>Road Type</td>
      <td>3</td>
      <td>Rural</td>
    </tr>
    <tr>
      <td>Day</td>
      <td>0</td>
      <td>Weekday</td>
    </tr>
    <tr>
      <td>Day</td>
      <td>1</td>
      <td>Weekend</td>
    </tr>
  </tbody>
</table>